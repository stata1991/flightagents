<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripPlanner.ai - Enhanced Chat Experience</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1E3A8A 0%, #7C3AED 100%);
            height: 100vh;
            overflow: hidden;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: white;
            border-bottom: 1px solid #e9ecef;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .agent-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .agent-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1E3A8A, #3B82F6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .agent-name {
            font-weight: 600;
            color: #212529;
            font-size: 16px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: #e9ecef;
            transform: scale(1.05);
        }

        /* Chat Area */
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            animation: fadeInUp 0.3s ease;
        }

        .message.ai {
            align-self: flex-start;
            background: #f8f9fa;
            color: #212529;
            border-bottom-left-radius: 4px;
        }

        .message.user {
            align-self: flex-end;
            background: #3B82F6;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.typing {
            align-self: flex-start;
            background: #f8f9fa;
            padding: 16px;
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #6c757d;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        /* Quick Reply Buttons */
        .quick-replies {
            display: flex;
            gap: 8px;
            padding: 16px 20px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .quick-replies::-webkit-scrollbar {
            display: none;
        }

        .quick-reply-btn {
            padding: 12px 20px;
            border: 2px solid #3B82F6;
            border-radius: 25px;
            background: white;
            color: #3B82F6;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            min-width: fit-content;
        }

        .quick-reply-btn:hover {
            background: #3B82F6;
            color: white;
            transform: translateY(-1px);
        }

        .quick-reply-btn:active {
            transform: translateY(0);
        }

        /* Input Area */
        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }

        .input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .input-field {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s ease;
            resize: none;
            min-height: 50px;
            max-height: 120px;
        }

        .input-field:focus {
            border-color: #3B82F6;
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: #3B82F6;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-btn:hover {
            background: #1E3A8A;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        /* Trip Summary Card */
        .trip-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .trip-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .trip-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #28A745, #20C997);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .trip-title {
            font-weight: 600;
            color: #212529;
            font-size: 18px;
        }

        .trip-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .trip-detail {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6c757d;
            font-size: 14px;
        }

        .trip-actions {
            display: flex;
            gap: 8px;
        }

        .trip-action-btn {
            padding: 8px 16px;
            border: 1px solid #3B82F6;
            border-radius: 20px;
            background: white;
            color: #3B82F6;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .trip-action-btn:hover {
            background: #3B82F6;
            color: white;
        }

        .trip-action-btn.primary {
            background: #3B82F6;
            color: white;
        }

        .trip-action-btn.primary:hover {
            background: #1E3A8A;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 16px;
            }

            .chat-area {
                padding: 16px;
            }

            .input-area {
                padding: 16px;
            }

            .message {
                max-width: 90%;
            }

            .trip-details {
                grid-template-columns: 1fr;
            }
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Success States */
        .success {
            background: #28A745 !important;
            color: white !important;
        }

        /* Error States */
        .error {
            background: #DC3545 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <div class="header">
            <div class="agent-info">
                <div class="agent-avatar">A</div>
                <div class="agent-name">Adventure Guide</div>
            </div>
            <div class="header-actions">
                <button class="action-btn" title="Settings">⚙️</button>
                <button class="action-btn" title="Help">❓</button>
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area" id="chatArea">
            <!-- Initial greeting will be added here -->
        </div>

        <!-- Quick Reply Buttons -->
        <div class="quick-replies" id="quickReplies" style="display: none;">
            <!-- Quick reply buttons will be added here -->
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-container">
                <textarea 
                    class="input-field" 
                    id="messageInput" 
                    placeholder="Ask me anything..."
                    rows="1"
                ></textarea>
                <button class="send-btn" id="sendBtn" disabled>
                    ➤
                </button>
            </div>
        </div>
    </div>

    <script>
        class EnhancedChatInterface {
            constructor() {
                this.chatArea = document.getElementById('chatArea');
                this.messageInput = document.getElementById('messageInput');
                this.sendBtn = document.getElementById('sendBtn');
                this.quickReplies = document.getElementById('quickReplies');
                
                this.conversationState = 'greeting';
                this.tripData = {};
                
                this.initializeEventListeners();
                this.startConversation();
            }

            initializeEventListeners() {
                // Send button click
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                
                // Enter key press
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // Auto-resize textarea
                this.messageInput.addEventListener('input', () => {
                    this.messageInput.style.height = 'auto';
                    this.messageInput.style.height = Math.min(this.messageInput.scrollHeight, 120) + 'px';
                    this.updateSendButton();
                });
            }

            updateSendButton() {
                const hasText = this.messageInput.value.trim().length > 0;
                this.sendBtn.disabled = !hasText;
            }

            async startConversation() {
                await this.addMessage('ai', this.getGreetingMessage());
                await this.delay(1000);
                await this.addMessage('ai', this.getStructuredQuestions());
                this.showQuickReplies(['Beach paradise', 'Urban exploration', 'Mountain adventure', 'Cultural journey']);
            }

            getGreetingMessage() {
                return `Welcome, adventurer! 🌟 I'm your personal travel expert, ready to turn your dreams into incredible journeys! 

I can discover hidden gems, find the perfect timing, and craft experiences that will create memories for a lifetime. Where shall we start your next adventure? 🗺️`;
            }

            getStructuredQuestions() {
                return `Perfect! Let's craft your dream adventure! 🚀 First, I need to understand your vision to create something truly magical:

1. **Where's calling your name?** 🌍 Got a destination in mind or shall I reveal some hidden gems?
2. **Who's joining your adventure?** 👥 Solo explorer, romantic duo, family expedition, or friend squad?
3. **When's your adventure time?** 📅 Dates and how long you want to immerse yourself?
4. **What's your adventure style?** 🎯 Relaxation, thrill-seeking, cultural immersion, or pure exploration?

Share your dreams with me! ✨`;
            }

            async addMessage(sender, content, isTyping = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                if (isTyping) {
                    messageDiv.innerHTML = `
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = content;
                }

                this.chatArea.appendChild(messageDiv);
                this.scrollToBottom();

                if (isTyping) {
                    await this.delay(2000);
                    messageDiv.remove();
                }
            }

            showQuickReplies(replies) {
                this.quickReplies.innerHTML = '';
                this.quickReplies.style.display = 'flex';

                replies.forEach(reply => {
                    const button = document.createElement('button');
                    button.className = 'quick-reply-btn';
                    button.textContent = reply;
                    button.addEventListener('click', () => this.handleQuickReply(reply));
                    this.quickReplies.appendChild(button);
                });
            }

            hideQuickReplies() {
                this.quickReplies.style.display = 'none';
                this.quickReplies.innerHTML = '';
            }

            async handleQuickReply(reply) {
                await this.addMessage('user', reply);
                this.hideQuickReplies();
                
                // Simulate AI response based on reply
                await this.simulateAIResponse(reply);
            }

            async simulateAIResponse(userInput) {
                await this.addMessage('ai', '', true); // Show typing indicator
                
                let response = '';
                if (userInput.toLowerCase().includes('beach') || userInput.toLowerCase().includes('paradise')) {
                    response = `Stunning choice! 🏖️ Beach paradises are perfect for soul-soothing relaxation and pure joy. I'm thinking Bali's hidden beaches, Maldives' crystal waters, or the Caribbean's vibrant shores.

Where's your beach paradise calling from? Any specific destination in mind?`;
                } else if (userInput.toLowerCase().includes('urban') || userInput.toLowerCase().includes('city')) {
                    response = `Fantastic! 🏙️ Urban exploration is incredible for culture, cuisine, and city adventures. I'm dreaming of Tokyo's neon streets, Paris's romantic corners, or New York's endless energy.

Which city is whispering your name?`;
                } else if (userInput.toLowerCase().includes('mountain') || userInput.toLowerCase().includes('adventure')) {
                    response = `Adventure awaits! 🏔️ Mountain adventures are perfect for thrill-seekers and nature lovers. Think Patagonia's rugged peaks, Nepal's Himalayan trails, or Switzerland's alpine wonders.

Where's your mountain adventure leading you?`;
                } else {
                    response = `Incredible choice! 🌟 Cultural journeys are perfect for discovering traditions and creating meaningful connections. Places like India's spiritual centers, Japan's ancient temples, or Morocco's vibrant markets offer unforgettable experiences.

Which culture-rich destination is calling your soul?`;
                }

                await this.addMessage('ai', response);
                this.showQuickReplies(['I have a destination in mind', 'Reveal hidden gems', 'Show me adventures']);
            }

            async sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;

                await this.addMessage('user', message);
                this.messageInput.value = '';
                this.messageInput.style.height = 'auto';
                this.updateSendButton();
                this.hideQuickReplies();

                // Simulate AI processing
                await this.addMessage('ai', '', true);
                await this.processUserMessage(message);
            }

            async processUserMessage(message) {
                // Simple keyword-based responses for demo
                let response = '';
                
                if (message.toLowerCase().includes('goa') || message.toLowerCase().includes('india')) {
                    response = `Incredible choice! 🏖️ Goa is a paradise of golden beaches, vibrant culture, and endless adventures. I can already see you exploring ancient Portuguese churches, dancing to beachside music, and discovering hidden beach shacks!

Now, let's craft your perfect Goa adventure:
• **Who's joining your journey?** Solo explorer, romantic duo, family expedition, or friend squad?
• **When's your adventure time?** Dates and how long you want to immerse yourself?
• **What's your adventure style?** Beach relaxation, cultural exploration, nightlife excitement, or pure discovery?

Share your vision with me! ✨`;
                    
                    this.showQuickReplies(['Romantic duo', 'Family expedition', 'Solo explorer', 'Friend squad']);
                } else if (message.toLowerCase().includes('couple') || message.toLowerCase().includes('romantic')) {
                    response = `Magical! 💕 A romantic Goa adventure sounds absolutely enchanting. I'm dreaming of candlelit dinners by the Arabian Sea, sunset walks on pristine beaches, and couples' spa experiences that will create memories forever.

When are you planning this romantic journey?`;
                    
                    this.showQuickReplies(['August 25th', 'September', 'October', 'Flexible dates']);
                } else {
                    response = `That sounds absolutely thrilling! 🌟 I'd love to help you craft that perfect adventure. Could you tell me more about your dream destination and what kind of experience you're seeking?`;
                }

                await this.addMessage('ai', response);
            }

            scrollToBottom() {
                this.chatArea.scrollTop = this.chatArea.scrollHeight;
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize the chat interface
        document.addEventListener('DOMContentLoaded', () => {
            new EnhancedChatInterface();
        });
    </script>
</body>
</html> 